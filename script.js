"use strict";$(function(){var t,i,e,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},o=$("body"),s=$("html, body, .pure-g, #create-form"),l=$(".wrapper"),r=l.length?l:o,a=function(t,i,e,n){var o=t.first().clone();0<i-17&&(i-=17);var s=Math.round(t.length*i*3/4/100);0<i-s&&(i-=s),o.css("height",e+"px"),o.css("width",i+"px"),o.html(n),o.appendTo(r);try{textFit(o,{detectMultiLine:!1,minFontSize:1,maxFontSize:1e3});var l=o.find("span").css("font-size");t.css("font-size",l),t.css("line-height",t.first().height()+"px")}catch(t){p()}o.remove()},h=function(t){(t=$("#"+t+":visible")).length&&a(t,t.width(),t.height(),t.text())},u=function(){s.css("overflow","hidden"),function(){var t=$("#name");if(t.is(":visible")){var i=String(t.html()).replace(/[&<>"'\/]/g,function(t){return n[t]});a(t,t.width(),t.height(),i)}}(),function(){var t=$(".unit_value:visible");if(t.length){var i="";t.each(function(){i+=$(this).text()}),a(t,$(".counter-wrapper").width(),t.first().height(),i)}}(),function(){var t=$(".unit_name:visible");if(t.length){var i=$(".unit_value:visible").not(".colon .unit_value").not("#id_sign"),e="",n=1/0;t.each(function(){$(this).text().length>e.length&&(e=$(this).text())}),i.each(function(){$(this).width()<n&&(n=$(this).width())}),a(t,n+=17,t.first().height(),e)}}(),h("value-wrapper"),h("clock-time"),h("clock-date"),s.css("overflow","visible")},p=function(){clearTimeout(t),clearTimeout(i),clearTimeout(e),t=setTimeout(function(){i=setTimeout(function(){e=setTimeout(function(){u()},500),u()},100),u()},50)};window.f=p}),$(function(){var t=function(){};t.prototype.ajax_now_initialized=!1,t.prototype.init_client_dt=null,t.prototype.init_server_dt=null,t.prototype.old_text="",t.prototype.tick_interval=null,t.prototype.constructor=t,t.prototype.failure_callback=function(t){},t.prototype.init_vars=function(){},t.prototype.tick=function(){},t.prototype.now=function(){return new Date-this.init_client_dt+this.init_server_dt},t.prototype.is_displayed=function(t){return"none"!=t.css("display")},t.prototype.init_now=function(){this.init_client_dt=new Date,this.init_server_dt=(new Date).getTime(),this.ajax_now_initialized=!0,this.run()},t.prototype.run=function(){if(clearInterval(this.tick_interval),this.init_server_dt){this.tick();var t=this;this.tick_interval=window.setInterval(function(){t.tick()},50)}else this.failure_callback();window.f(),$(window).resize(window.f)},t.prototype.init=function(){this.init_vars(),this.ajax_now_initialized?this.run():this.init_now()},window.y=t}),$(function(){var t=function(){y.prototype.constructor.call(this)};(t.prototype=new y).constructor=t,t.prototype.default_title=null,t.prototype.is_tab_active=null,t.prototype.smallest_value=null,t.prototype.UNITS=null,t.prototype.$minus_sign=null,t.prototype.init_vars=function(){this.UNITS=[],this.$minus_sign=$("#minus_sign"),this.default_title=document.title,this.is_tab_active=!0,this.UNITS.push({element:$("#day"),value:864e5,zfill:!1}),this.UNITS.push({element:$("#hour"),value:36e5,zfill:!0}),this.UNITS.push({element:$("#minute"),value:6e4,zfill:!0}),this.UNITS.push({element:$("#second"),value:1e3,zfill:!0}),this.smallest_value=this.UNITS[this.UNITS.length-1].value;for(var t=0;t<this.UNITS.length-1;++t)$("#colon_"+this.UNITS[t].element.attr("id")).css("display","inline-block")},t.prototype.refresh=function(t,i){for(var e="",n=[],o=0;o<this.UNITS.length;++o){var s=this.UNITS[o],l=Math.abs(i(t/s.value));t%=s.value,s.zfill&&(l=10>l?"0"+l:l),s.element.html("&#8201;"+l+"&#8201;"),e+=l,n.push(l)}this.is_displayed(this.$minus_sign)&&(e+="-&#8201;"),document.title=!this.is_tab_active&&0<=t?"["+n.join(":")+"] "+this.default_title:this.default_title,this.old_text.length!==e.length&&window.f(),this.old_text=e},t.prototype.init=function(t){var i=this;this.target=t,$(window).focus(function(){i.is_tab_active=!0,document.title=i.default_title}),$(window).blur(function(){i.is_tab_active=!1}),y.prototype.init.call(this)},window.x=t}),$(function(){var t=function(){x.prototype.constructor.call(this)};t.prototype=new x,t.prototype.constructor=t,t.prototype.alarm_played=null,t.prototype.$alarm=null,t.prototype.init_vars=function(){this.alarm_played=!1,this.$alarm=$("#alarm"),x.prototype.init_vars.call(this)},t.prototype.tick=function(){var t=this.target-this.now();!this.alarm_played&&t<this.smallest_value&&t>-this.smallest_value&&(this.$alarm.attr("src","/static/alarm.mp3"),this.$alarm.get(0).play(),this.alarm_played=!0),0<=t?(this.$minus_sign.hide(),this.refresh(t,Math.floor)):this.stop_on_finish?this.refresh(0,Math.ceil):(this.$minus_sign.show().css("display","inline-block"),this.refresh(t,Math.ceil))},t.prototype.init=function(t,i){this.stop_on_finish=i,x.prototype.init.call(this,t)},t=new t,t.init.bind(t)(15572016e5,!0)})
